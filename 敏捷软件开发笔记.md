- [将敏捷用户故事分解成任务并估计工作量](#将敏捷用户故事分解成任务并估计工作量)
  - [简介](#简介)
  - [分解用户故事](#分解用户故事)
  - [评估工作量](#评估工作量)
  - [故事点，而不是时间](#故事点而不是时间)
  - [策划扑克](#策划扑克)
  - [T 恤尺寸](#t-恤尺寸)
  - [结论](#结论)


**敏捷最重要的是：团队达成一致意见，团队成员都认同要做的事的价值**

敏捷开发模式的重要手段：用户故事实现需求的敏捷化

# 将敏捷用户故事分解成任务并估计工作量

## 简介

敏捷框架在软件开发领域带来了强烈的文化转变，从广泛的计划转向迭代和精益的执行。然而，有一件事没有改变，那就是每个人仍然期望软件特性何时交付以及项目需要多长时间才能完成的估计。任务规划和评估是困难的，也许足以将它们视为科学和艺术。对于开发人员和产品所有者来说，这可能是一项令人望而生畏的任务。

也就是说，当涉及到将敏捷用户故事分解成任务和评估他们的工作级别时，有足够好的“科学”，或者至少有经过验证的实践可以依赖。在本指南中，你将了解它们是什么。

## 分解用户故事

需要马上确定的一件事是，这是一个团队的努力。虽然产品所有者负责对待办事项列表进行优先排序，并从业务和用户那里获取需求，但开发人员确实是能够最好地理解必须开发哪些技术能力以及需要付出多大努力的人。

将用户故事分解为任务时，有一些重要的事情需要考虑：

+ **任务要小，但不要太小。**根据经验，一项任务应该是可以在一天内完成的，但也不能在几分钟内完成。
+ **在范围内保持任务非常精确。**不要创建带有“编码”和“实现”等模糊语句的任务，认为任何人都可以参考父用户故事来获得详细信息。写一些更有意义的东西，也使范围非常清楚。例如：“开发登陆类。”
+ **使用用户故事的验收标准作为起点，并将其定义为一个检查表。**验收标准将帮助你确定需要实现哪些特性，“完成”的定义是所有用户故事的检查表，它还可以帮助你确定是否错过了要完成的故事任务。
  
让我们通过一个例子来理解这一切。让我们看看下面的用户故事，它是 Web 应用程序的必备条件：

***作为一个注册用户，我想用我的用户名和密码登录，以便系统可以认证我，我可以信任它。***

验收条件如下：

***鉴于我是注册用户并且已经退出登录...***

**1、如果我进入登录页面，输入我的用户名和密码，然后点击登录，那么与我的用户相关的数据应该是可访问的。**

**2、如果我进入登录页面，输入我的用户名，但密码不正确，然后点击登录，那么登录失败，错误消息指定用户名或密码是错误的。**

**3、如果我进入登录页面，输入我的用户名和密码，然后点击登录，那么我的用户登录会话将在不到 8 秒内加载。**

让我们假设所有用户故事的“完成”定义都包括诸如确保代码符合标准和样式指导以及正确测试等内容。

通过让所有的开发人员集思广益，你可能会听到这样的话：

+ 我们需要一个新的注册和登录用户界面元素；
+ 我们需要为密码开发加密功能；
+ 我们需要在数据库中为用户信息创建一个表；
+ 等等。

现在，为了以一种更有条理的方式来做事，让我们团队思考：

**1、我们如何将其分解为可执行的、范围限制的任务？在这里，团队可以就用户故事的以下任务达成一致：**
+ 定义注册/登录表单样式并开发新的 CSS 类；
+ 开发 HTML 和 Javascript 注册/登录表示层代码；
+ 开发 Javascript 注册表单验证代码；
+ 等等。

**2、在执行所有任务时是否满足验收标准？在这里，团队研究了验收标准并得出以下结论：**
+ 如果不开发错误页面或消息，就不能满足第二个验收标准。然后，团队扩展了“开发 HTML 和 Javascript 注册/登录表示层代码” 任务的范围（描述），以包括一个错误消息。因为一个新的任务太小。
+ 第三个验收标准是指非功能性需求。团队意识到，如果不进行适当的测试，就无法确定是否满足需求，因此添加了这样一个任务：“在登录函数上运行性能测试”。

**3、用户故事能否满足给定任务的已完成定义？在这里，团队浏览了确定完成用户故事的任务列表，并得出结论，应该在这个故事中添加两个新任务，以确保其完整性：**
+ 编写并运行回归测试；
+ 更新更改日志以描述添加的新注册/登录功能。

现在你可以看到任务列表已经增加了一点，只要问我们自己这些问题。自然地，在做了几次这样的练习之后，团队会从一开始就开始思考这些问题，并且在每次提出次要任务时都会变得更好，比如测试或者文档相关的任务，以确保重要的细节永远不会被遗忘，交付被接受。

## 评估工作量

当你对用户故事中的任务列表有了更清晰的了解之后，就是评估工作量的时候了。在这里，需要考虑的重要事项是：

+ **依赖项和下游任务：** 这个任务是否有必须开发或修改的依赖项或构建块？
+ **复杂性和团队技能：** 开发人员是否具备处理此任务的必要技能？或者他们需要一些时间进行研究和学习？
+ **过去的估计：**开发人员过去是否估计过类似的任务，以便更好地估计当前的工作任务？以前有人做过类似的任务嘛？

## 故事点，而不是时间

在敏捷中，团队通常使用故事点这个度量单位来进行估算，而不是实际的时间估算（如小时或天）。故事点是遵循修改过的斐波拉契增长序列的数值，例如：1、2、3、5、8、13、20、40 和 100。由于规模的相对性，它们代表了更容易相互比较的工作量级别。例如，虽然很难衡量一个五级工作量和六级工作量有多大的不同（20% 的增加），但是五级工作量和八级工作量有更明显的区别（60% 的增加）。在量表的较低范围内，绝对差异很小，但相对差异仍然很大（例如，第二级是第一级的两倍工作量）。正是这种不断变化的巨大相对差异，使得这个系统能够工作。

敏捷团队必须达成一致意见（或者最终通过经验学习）的正是一个故事点在实际工作中所对应的内容。然后，其他的一切都可以用这个来衡量。故事点不需要讨论时间，因为时间并总是一个可靠的度量标准。例如，如果在特定的一周内，每个团队成员都忙于公司其他职责，比如培训或面试，那么每个任务都需要用人为的高天数重新估计（这会使他们背后的真正工作量蒙上阴影）。对于故事点，工作量估计始终是正确的。实际的交付日期将随团队的可用性而变化，但是这一点从一开始就是可以理解的。

当涉及到评估任务的故事点时，有一些技术是有帮助的。两个最常用的是策划扑克和 T 恤尺寸。

## 策划扑克

策划扑克游戏的想法很简单，可以概括为以下几个步骤：

**1、每个团队人员获得与故事点值（1、2、3、5等）相对应的卡片。**

**2、产品所有者浏览每个用户故事，并要求团队根据所涉及的任务单独评估故事的工作量的级别。**

**3、每个团队成员选择一张卡片，该卡片对应于他们对用户故事的故事点估计值。在这个时候，他们不应该相互亮牌，也不应该开始任何讨论。这是一种丰富评估过程的方法，不让任何人影响任何其他团队成员，而是让每个人提供他们各自的观点。**

**4、每个人都亮出底牌。如果存在一致性（即结果差异很小），那么故事点可以很容易地分配给用户故事（最常选择的卡片是最合理的选择），团队可以转移到下一个。如果没有达成共识，或者提出了一些截然不同的估计，那么每个团队成员都有机会解释他或她的决定，澄清任何误解或错误的假设。在此之后，团队根据所进行的讨论重复第三步和第四步。**

重复步骤三和步骤四，直到达成共识。在策划扑克会议中，一个由 6 个开发人员组成的团队达成共识的例子是 3-3-2-3-5-3（三个故事点将是一个合理的选择）。

对于相同的团队规模，一个没有达成共识并且可能需要另一次迭代的例子是 3-8-3-2-5-8 或 3-3-3-13-3-5（一个“玩家”强烈反对）。

## T 恤尺寸

这种技术通过对相关度量使用更大的“桶”来简化工作量估计，这些度量对应于 T 恤尺寸 XS、S、M、L 和 XL（或者更小的子集）。一个类似策划扑克的过程可以在每个用户故事的工作量上达成共识，这应该更容易做到，因为它涉及更少的大小选项，它把讨论带到一个更高的水平（与措施，如“小”和“大”相反的数字）。由于这个原因，这种技术通常会加速评估过程。这也是向团队介绍敏捷和相对评估思想的好方法。


## 结论

将用户故事分解为任务并估计工作量不是产品所有者独自完成的事情。敏捷评估技术的关键主题是达成共识的目标和过程的迭代性质。通过使用故事点的相对测量系统，并通过让整个团队参与评估过程，一个高保真度的评估趋向于出现（或者至少比通过传统方法获得的更好）。通过从讨论中删除时间，期望变得更加现实，团队能够更好地衡量工作中涉及的复杂性。

